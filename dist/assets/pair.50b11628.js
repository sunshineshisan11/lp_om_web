import{_ as C,u as J,S as O,b as j,r as v,C as b,B as k,D as B,o as s,f as a,g as t,h as n,k as w,l as E,j as S,s as R,z as V,x as D,y as F,A as M,W as I,F as p,i as N,t as $}from"./main.e5148843.js";const P={class:"main"},T={class:"sec"},G={class:"man"},W={class:"avatar"},q=["src"],H={class:"pz"},K=["src"],Q=["src"],X={class:"pz"},Y=["src"],Z=["src"],x={class:"pz"},ee=["src"],se=["src"],ae={class:"woman"},oe={class:"avatar"},te=["src"],le={class:"pz"},re=["src"],ce={class:"pz"},ne=["src"],ie={class:"pz"},ue=["src"],de={__name:"pair",setup(pe){let d={en:R,zh:V,jp:D,ko:F,vi:M}[localStorage.getItem("language")];const L=J();O(),JSON.parse(localStorage.getItem("user"))||L.replace("/login");const c=j(),_=v({}),U=()=>{b.get_user({account:JSON.parse(localStorage.getItem("user")).account}).then(e=>{if(e.code==0){const o=e.rows[0];console.log(o),delete o.password,_.value=o,c.user=o,console.log(c.user),localStorage.setItem("user",JSON.stringify(o))}else k.error("fail")})},r=v({});b.pairUser({inviteCode:c.user.inviteCode,vipGrade:3}).then(e=>{console.log(e),e.code==0?r.value=e.rows[0]:k.error("fail")});const i=v([]),m=v(""),f=v(""),h=async(e,o)=>{if(I.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),!(e.type==="image/jpeg"||e.type==="image/png"))return m.value=d.mine.model.message[5],f.value="error",!1;if(!(e.size/1024/1024<2))return m.value=d.mine.model.message[6],f.value="error",!1;const g=new FileReader;return g.onload=A=>{i.value[o]=A.target.result,_.value[o==0?"pz":o==1?"pz1":"pz2"]=i.value},g.readAsDataURL(e),!0},z=(e,o)=>{if(console.log(e.file),e.code==0){_.value;let u={};u=o==0?{pz:e.file}:o==1?{pz1:e.file}:{pz2:e.file},I.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}).close(),b.set_pz({...u,account:JSON.parse(localStorage.getItem("user")).account}).then(g=>{g.code==0?U():k.error("fail")})}console.log(e)},y=()=>{m.value=d.mine.model.message[7],f.value="error"};return(e,o)=>{const u=B;return s(),a("div",P,[t("div",T,[t("div",G,[t("div",W,[t("img",{src:e.$domain+"/"+n(c).user.avatar},null,8,q)]),t("div",H,[w(u,{class:"avatar-uploader",action:"https://www.findyourflame.vip:168/upload/pz","show-file-list":!1,"before-upload":l=>h(l,0),"on-success":l=>z(l,0),"on-error":y},{default:E(()=>[i.value[0]?(s(),a("img",{key:0,src:i.value[0],class:"avatarEdit"},null,8,K)):(s(),a(p,{key:1},[n(c).user.pz?(s(),a("img",{key:0,src:e.$domain+"/"+n(c).user.pz,class:"avatarEdit"},null,8,Q)):(s(),a(p,{key:1},[N($(n(d).mine.upload[0]),1)],64))],64))]),_:1},8,["before-upload","on-success"])]),t("div",X,[w(u,{class:"avatar-uploader",action:"https://www.findyourflame.vip:168/upload/pz","show-file-list":!1,"before-upload":l=>h(l,1),"on-success":l=>z(l,1),"on-error":y},{default:E(()=>[i.value[1]?(s(),a("img",{key:0,src:i.value[1],class:"avatarEdit"},null,8,Y)):(s(),a(p,{key:1},[n(c).user.pz1?(s(),a("img",{key:0,src:e.$domain+"/"+n(c).user.pz1,class:"avatarEdit"},null,8,Z)):(s(),a(p,{key:1},[N($(n(d).mine.upload[1]),1)],64))],64))]),_:1},8,["before-upload","on-success"])]),t("div",x,[w(u,{class:"avatar-uploader",action:"https://www.findyourflame.vip:168/upload/pz","show-file-list":!1,"before-upload":l=>h(l,2),"on-success":l=>z(l,2),"on-error":y},{default:E(()=>[i.value[2]?(s(),a("img",{key:0,src:i.value[2],class:"avatarEdit"},null,8,ee)):(s(),a(p,{key:1},[n(c).user.pz2?(s(),a("img",{key:0,src:e.$domain+"/"+n(c).user.pz2,class:"avatarEdit"},null,8,se)):(s(),a(p,{key:1},[N($(n(d).mine.upload[2]),1)],64))],64))]),_:1},8,["before-upload","on-success"])])]),t("div",ae,[t("div",oe,[t("img",{src:e.$domain+"/"+r.value.avatar},null,8,te)]),t("div",le,[r.value.pz?(s(),a("img",{key:0,width:100,src:r.value.pz?e.$domain+"/"+r.value.pz:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",class:"avatarEdit",alt:"Avatar"},null,8,re)):S("",!0)]),t("div",ce,[r.value.pz1?(s(),a("img",{key:0,width:100,src:r.value.pz1?e.$domain+"/"+r.value.pz1:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",class:"avatarEdit",alt:"Avatar"},null,8,ne)):S("",!0)]),t("div",ie,[r.value.pz2?(s(),a("img",{key:0,width:100,src:r.value.pz2?e.$domain+"/"+r.value.pz2:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",class:"avatarEdit",alt:"Avatar"},null,8,ue)):S("",!0)])])]),o[0]||(o[0]=t("div",{class:"foot"},null,-1))])}}};var me=C(de,[["__scopeId","data-v-745d18bd"]]);export{me as default};
//# sourceMappingURL=pair.50b11628.js.map
